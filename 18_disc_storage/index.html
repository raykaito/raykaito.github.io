<!DOCTYPE HTML>

<html>

<head>
	<title>Disc Search</title>
	<link rel="stylesheet" href="../rayStyle.css" type="text/css">
	<link rel="icon" type="image/png" href="../icon.png">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1"/>
</head>


<body id="Body">

	<table id="Table" border="0" align="center">
		<tr>
			<td align="left" onclick="switchScanner()">
		        <a id="textScannerStatus">Camera ON/OFF</a>
		        <video  id="cameraMedia" controls autoplay playsinline opacity="0"  width="1" height="1" style="display:none;"></video>
			</td>
			<td align="right">
		        <input id="searchBar" type="text" placeholder="Search by Title" onfocus="switchScanner(false)" onchange="updateSearchResult()">
			</td>
		</tr>
		<tr>
			<td align="left" colspan="2">
		        <canvas id="displayCanvas" style="display:inline" onclick="discScanner.drawVideo()"></canvas>
			</td>
		</tr>
		<tr>
			<td align="left" class="untouchable" width="50%" border-left="1">
				<u><p id="textRightColumn">Visible</p></u>
			</td>
			<td align="left" class="untouchable" width="50%" border-right="1">
				<u><p id="textLeftColumn">All</p></u>
			</td>
		</tr>
		<tr>
			<td id="debugger" align="left" colspan="2">
		        <canvas id="codeDisplayCanvas" style="display:inline"></canvas>
			</td>
		</tr>
	</table>
	<script type="text/javascript" src="canvas.js"></script>
	<script type="text/javascript" src="vision_program.js"></script>
	<script type="text/javascript" src="scanner.js"></script>
	<script type="text/javascript" src="../00_JavaScripts/opacityController.js"></script>
	<script type="text/javascript">
	<!--
		//Opacity Control
		const table  = document.getElementById('Table' );
		const body   = document.getElementById('Body'  );
		showObject(body, table);

		//Prepare textColums
		const rightTitle = document.getElementById("textRightColumn");
		const leftTitle  = document.getElementById("textLeftColumn");

		//Prepare DisplayCanvas & codeDisplayCanvas
        const displayCanvas = new Canvas(document.getElementById("displayCanvas"));
        displayCanvas.flexResize(0.95,0.5);
		displayCanvas.fillAll();
        table.width = displayCanvas.canvas.style.width;

        //Debugger
        const debugSpace = document.getElementById("debugger");
		//Debugging tool for ios
		logCanvas = new LogCanvas();
		function log(input){
			logCanvas.newLine(input);
		}
		//DisplayCode
		const codeDisplayCanvas = new CodeCanvas(document.getElementById("codeDisplayCanvas"));
		codeDisplayCanvas.flexResize(0.95,0.5);
		codeDisplayCanvas.fillAll("white");
		codeDisplayCanvas.displayCode();

		//Prepare scanner
		const discScanner = new DiscScanner(document.getElementById("cameraMedia"),displayCanvas);

		//Scanner Status
		const textScannerStatus	= document.getElementById("textScannerStatus");
		const searchBar			= document.getElementById("searchBar");
		let ScannerOn = false;
		const updateScannerStatus = () => {
			if(ScannerOn){
				textScannerStatus.innerHTML = "Camera <B><font color='green'>ON</font></B>/OFF";
				discScanner.startScan();
				displayCanvas.showCanvas();
				rightTitle.innerHTML = "Visible";
				leftTitle.innerHTML  = "All";

			}else{
				textScannerStatus.innerHTML = "Camera ON/<B><font color='red'>OFF</font></B>";
				discScanner.stopScan();
				displayCanvas.hideCanvas();
				rightTitle.innerHTML = "All";
				leftTitle.innerHTML  = "";
			}
		}
		const switchScanner = (input) => {
			if(input==undefined){
				ScannerOn = !ScannerOn;
			}else{
				ScannerOn = input;
			}
			updateScannerStatus();
		}
		updateScannerStatus();

	//--> 
	</script>

</body>


</html>
