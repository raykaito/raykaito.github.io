<!DOCTYPE html>
<html>
<body>

<h2>Using the XMLHttpRequest object</h2>

<button type="button" onclick="loadXMLDoc()">Change Content</button>

<p id="demo"></p>

<script>
function loadXMLDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      
      var arr = this.responseText.split('\n');
      //1次元配列を2次元配列に変換
      var res = [];
      for(var i = 0; i < arr.length; i++){
        //空白行が出てきた時点で終了
        if(arr[i] == '') break;

        //","ごとに配列化
        res[i] = arr[i].split(',');

        for(var i2 = 0; i2 < res[i].length; i2++){
          //数字の場合は「"」を削除
          if(res[i][i2].match(/\-?\d+(.\d+)?(e[\+\-]d+)?/)){
            res[i][i2] = parseFloat(res[i][i2].replace('"', ''));
          }
        }
      }
      console.log(res);

      document.getElementById("demo").innerHTML =
      res[0][0];
    }
  };
  xhttp.open("GET", "faculty.txt", true);
  xhttp.send();
}
</script>

</body>
</html>
